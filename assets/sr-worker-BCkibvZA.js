var d=(e,t,p)=>{const r=e[t];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((g,c)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(c.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==p?". Note that variables only represent file names one level deep.":""))))})};let m=!1,i=null,o=null,s=null,a,l,n,u;self.onmessage=function(e){switch(e.data?.type){case"Iterate":if(!m){self.postMessage({type:"Error",message:"Not initialized"});return}a=e.data.lossData.charRankUps,l=e.data.lossData.wepRankUps,a.pullsSum>0&&(n.rankUpSR(i,a,s.ODDS_SR,s.SR_PITY),u.pruneAndNormalize(i)),l.pullsSum>0&&(n.rankUpSR(o,l,s.ODDS_SR,s.SR_PITY),u.pruneAndNormalize(o)),self.postMessage({type:"IterationComplete"});break;case"IterateLast":if(!m){self.postMessage({type:"Error",message:"Not initialized"});return}a=e.data.lossData.charRankUps,l=e.data.lossData.wepRankUps,a.pullsSum>0&&n.rankUpSR(i,a,s.ODDS_SR,s.SR_PITY),l.pullsSum>0&&n.rankUpSR(o,l,s.ODDS_SR,s.SR_PITY),self.postMessage({type:"LastIteration",distributionCharSR:i,distributionWepSR:o});break;case"Initiate":Promise.all([d(Object.assign({"../../../games/R1999/R1999-pull-logic.js":()=>import("./R1999-pull-logic-D5GF5WT8.js"),"../../../games/common/common-pull-logic.js":()=>import("./common-pull-logic-Dh2Y5ybP.js"),"../../../games/endfield/endfield-pull-logic.js":()=>import("./endfield-pull-logic-CIEPF3Lt.js"),"../../../games/genshin/genshin-pull-logic.js":()=>import("./genshin-pull-logic-Pe4RtljL.js"),"../../../games/morimens/morimens-pull-logic.js":()=>import("./morimens-pull-logic-CgNaAYvx.js"),"../../../games/wuwa/wuwa-pull-logic.js":()=>import("./wuwa-pull-logic-DnSkwhdU.js"),"../../../games/zenless/zenless-pull-logic.js":()=>import("./zenless-pull-logic-yGDQyFD1.js")}),`../../../games/${e.data.context.moduleType.pullLogic}/${e.data.context.moduleType.pullLogic}-pull-logic.js`,6),d(Object.assign({"../../../games/R1999/R1999-helpers.js":()=>import("./R1999-helpers-Bcwiz0nM.js"),"../../../games/common/common-helpers.js":()=>import("./common-helpers-B2WE4zNo.js"),"../../../games/endfield/cashback-helpers.js":()=>import("./cashback-helpers-B46PwS9U.js"),"../../../games/endfield/endfield-helpers.js":()=>import("./endfield-helpers-BynoxKs7.js"),"../../../games/genshin/genshin-helpers.js":()=>import("./genshin-helpers-BIwKO5JD.js"),"../../../games/morimens/morimens-helpers.js":()=>import("./morimens-helpers-DVaKfHoS.js"),"../../../games/wuwa/wuwa-helpers.js":()=>import("./wuwa-helpers-B_hitJ3O.js")}),`../../../games/${e.data.context.moduleType.helpers}/${e.data.context.moduleType.helpers}-helpers.js`,6)]).then(([t,p])=>{n=t,u=p,i=e.data.distribution.distributionCharSR,o=e.data.distribution.distributionWepSR,s=e.data.context.contextSR,m=!0,self.postMessage({type:"InitComplete"})}).catch(t=>{console.error("Failed to load modules:",t),self.postMessage({type:"InitError",error:t.message})});break;default:console.warn("Unknown type:",e.data?.type)}};
