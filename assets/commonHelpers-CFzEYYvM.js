function i(t){const f=new Array(t.length);for(let l=0;l<t.length;l++){let e=0;const o=t[l].states;for(let s=0;s<o.length;s++){const n=o[s];for(const a of n.values())e+=a.prob}f[l]=e}return f}function h(t){const f=new Array(t.length);for(let l=0;l<t.length;l++){let e=0;const o=t[l].states;for(let s=0;s<o.length;s++)e+=o[s];f[l]=e}return f}function m(t){let l=0;for(let e=0,o=t.length;e<o;e++){const s=t[e].states;for(let n=0,a=s.length;n<a;n++){const r=s[n];for(const[c,p]of r)p.prob<=1e-10&&(l+=p.prob,r.delete(c))}}if(l>0){const e=1/(1-l);for(let o=0,s=t.length;o<s;o++){const n=t[o].states;for(let a=0,r=n.length;a<r;a++){const c=n[a];for(const[p,u]of c)u.prob*=e}}}}function y(t){let l=0;for(let e=0,o=t.length;e<o;e++){const s=t[e].states;for(let n=0,a=s.length;n<a;n++)s[n]>0&&s[n]<=1e-10&&(l+=s[n],s[n]=0)}if(l>0){const e=1/(1-l);for(let o=0,s=t.length;o<s;o++){const n=t[o].states;for(let a=0,r=n.length;a<r;a++)n[a]!=0&&(n[a]*=e)}}}function g(t,f){let l=!0;if(f)for(let e=0;e<t.length-1;e++){let o=!0;for(const s of t[e].states)s>0&&(o=!1,l=!1);t[e].isEmpty=o}else for(let e=0;e<t.length-1;e++){let o=!0;for(const s of t[e].states)s.size>0&&(o=!1,l=!1);t[e].isEmpty=o}return l}function E(t,f,l){if(f.type==="probability"){const e=t.length-1;let o=0;for(const s of t[e].states)for(const[n,a]of s)o+=a.prob;return o>f.value}else if(f.type==="pulls")return l===f.value}function L(t){const f=[];for(let e=0;e<t.length;e++){const o=t[e].states;let s="None";e>0&&e<=t.length&&t[e-1]&&(s=t[e-1].type||"None");let n={offRates:new Map,type:s};for(const a of o)a.size>0&&l(n.offRates,a);f.push(n)}return f;function l(e,o){for(const[s,n]of o)e.has(s)?e.get(s).prob+=n.prob:e.set(s,{...n})}}function b(t){for(let f=0;f<t.length;f++){const l=t[f].states;for(let e=0;e<l.length;e++){const o=l[e];let s=0;for(const n of o.values())s+=n.prob;l[e]=s}}}export{g as checkIsEmpty,E as checkIsTarget,L as consolidateDistributionForCashback,i as consolidateProbabilities,h as consolidateProbabilitiesCheap,y as normalizeCheap,m as pruneAndNormalize,b as simplifyDistribution};
