(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();class K{constructor({getPageConfiguration:t,getLabels:e,getPullPlan:i,getTarget:r,updateChart:o,convertToChartData:s,recalcInputs:a,calculatorFunction:l,calculatorConfig:d,pageConfig:c,postCalculationHooks:h,persistence:u,chibi:p}){this.getPageConfiguration=t,this.getLabels=e,this.getPullPlan=i,this.getTarget=r,this.updateChart=o,this.convertToChartData=s,this.recalcInputs=a,this.calculatorFunction=l,this.calculatorConfig=d,this.pageConfig=c,this.postCalculationHooks=h||[],this.persistence=u,this.chibi=p}async runCalculation(){const t=this.getTarget(),e=this.getPageConfiguration(this.calculatorConfig.CONSTELLATION_MAP,this.calculatorConfig.gachaConfig,this.pageConfig.SELECTORS,this.pageConfig.INITIAL_CONFIG),i=this.getLabels(this.calculatorConfig.gachaConfig.paths);if(i.length>99){this.chibi.showError("Too many items! Maximum 99 items allowed.");return}const r=await this.calculatorFunction(e,t),o=this.convertToChartData(r.chartData);this.updateChart(o.data,o.labels,i),this.recalcInputs(o.data);const s={results:r,inputConfig:e,chartLabels:i,gachaConfig:this.calculatorConfig.gachaConfig,CONSTELLATION_MAP:this.calculatorConfig.CONSTELLATION_MAP};if(this.postCalculationHooks.forEach(a=>a(s)),this.persistence){const a=parseInt(document.querySelector('[data-control="pulls"]').value),l=parseInt(document.querySelector('[data-control="probability"]').value);this.persistence.saveCalculation({input:this.getPullPlan(),targetProb:l,targetPull:a,persistInput:document.querySelector(".mode-label.active").getAttribute("data-target")}),this.persistence.saveButtons()}}}function Q(n,t,e,i,r,o){R(t.pity,i,o),H(t,i,o),M(r);const s=n.loadTables();s&&(E(s.pity,o),x(s.constellation,o),k(s.rateUps),e.validateAll()),n.init()}function Z(n){n.loadButtons().isHidden&&N()}function R(n,t,e){const i=document.getElementById("pity-row-template"),r=document.querySelector(`${e.PITY_TABLE} tbody`);Object.entries(t.pitySettings).forEach(([o,s])=>{const a=i.content.cloneNode(!0).querySelector("tr"),l=a.querySelector(".special-mechanic");a.dataset.validationType="individual";const d=a.querySelector('[data-control="pity-4"]'),c=a.querySelector('[data-control="pity-5"]');if(d&&(d.min=0,d.max=o.includes("weapon")?n.pitySRWep-1:n.pitySRChar-1),c&&(c.min=0,c.max=o.includes("weapon")?n.pitySSRWep-1:n.pitySSRChar-1),a.dataset.banner=o,a.querySelector(".banner-name").textContent=o,a.querySelector('[data-control="pity-4"]').value=s.pity4,a.querySelector('[data-control="pity-5"]').value=s.pity5,l){let u="";o==="character"?u=`<div class="button-container">
            <input type="number" data-control="capRad" class="custom-input" min="0" max="3" 
                   value="${s.caprad??0}">
                            <button class="help-btn" data-help-key="caprad-help"
                                aria-label="Help for Importing Pity Data">
                                ?
                            </button>
                        </div>`:o==="weapon"&&(u=`<div class="button-container">
            <input type="number" data-control="epPath" class="custom-input" min="0" max="1" 
                   value="${s.epPath??0}">
                            <button class="help-btn" data-help-key="eppath-help"
                                aria-label="Help for Importing Pity Data">
                                ?
                            </button>
                        </div>`),l.innerHTML=u}r.appendChild(a);const h=document.querySelector("#pity-table");h&&h.querySelectorAll('tbody tr input[type="number"]').forEach(u=>u.addEventListener("input",function(){let p=this.value;p.length>1&&p.startsWith("0")&&(this.value=p.replace(/^0+/,""),this.value===""&&(this.value="0"));let y=parseInt(this.value)||0;y>u.max?(this.value=u.max,T(this)):y<=u.min&&(this.value=u.min,T(this))}))})}function H(n,t,e){const i=document.getElementById("const-column-template"),r=document.querySelectorAll(`${e.CONSTELLATION_TABLE} tbody tr`),o=n.poolStandardCharSSR,s=n.poolCharSR;r.forEach(a=>{const l=document.createDocumentFragment(),d=a.dataset.rarity;a.dataset.validationType="row-sum",a.dataset.targetSum=d==="5"?o:s;for(let c=0;c<t.constellationColumns;c++){const h=i.content.cloneNode(!0),u=h.querySelector("input");if(c===t.constellationColumns-1){const p=d==="5"?o:s;u.value=p}u.addEventListener("input",()=>w(a)),u.addEventListener("input",function(){u.value.length>1&&u.value.startsWith("0")&&(u.value=u.value.replace(/^0+/,"")),u.value===""&&(u.value="0")}),l.appendChild(h)}a.appendChild(l),B(a),w(a)})}function B(n){const t=document.createElement("div");t.className="row-progress-bar",n.appendChild(t)}function w(n){const t=n.querySelectorAll("input"),e=parseInt(n.dataset.targetSum);let i=0;t.forEach(s=>{i+=parseInt(s.value)||0});const r=n.querySelector(".row-progress-bar"),o=Math.min(i/e*100,100);r.style.width=o+"%",o<60||i>e?r.style.background="rgba(244, 67, 54, 0.3)":o<80?r.style.background="rgba(241, 244, 54, 0.3)":r.style.background="rgba(54, 244, 79, 0.3)"}function M(n){const t=document.querySelectorAll("#rate-up-table select");if(t.length===0)return;const e=n.map(i=>`<option value="${i.value}">${i.text}</option>`).join("");t.forEach(i=>{i.innerHTML=e,i.value="unknown"})}function tt(n,t=null){const e=document.querySelector('[data-control="probability"]'),i=document.querySelector('[data-control="pulls"]');t?(e.value=t.targetProb||n.probability,i.value=t.targetPull||n.pulls):(e.value=n.probability,i.value=n.pulls),e.addEventListener("input",function(){let r=this.value;r.length>1&&r.startsWith("0")&&(this.value=r.replace(/^0+/,""),this.value===""&&(this.value="0"));let o=parseInt(this.value)||0;o>100?(this.value="100",T(this)):o===0&&(this.value="0")}),i.addEventListener("input",function(){let r=this.value;r.length>1&&r.startsWith("0")&&(this.value=r.replace(/^0+/,""),this.value===""&&(this.value="0"));let o=parseInt(this.value)||0;o>9999?this.value="9999":o<1&&(this.value="1")})}function T(n){n.style.borderColor="#a71919",n.style.outline="1px solid #a71919",n.classList.add("flicker"),setTimeout(()=>{n.classList.remove("flicker"),n.style.borderColor="",n.style.outline=""},500)}function et(n,t,e){const i=[];for(let o=0;o<n.length;o++){let s=0;for(const[a,l]of n[o].offRates)s+=l.prob;s=(s*100).toFixed(2),s>0&&i.push({name:t[o],probability:s,p10:e[o].LOWER_BOUND,mean:e[o].MEAN,p90:e[o].UPPER_BOUND,color:"#3498db"})}const r=document.querySelector("#probability-table tbody");r.innerHTML="",i.forEach(o=>{const s=document.createElement("tr"),a=o.probability;s.innerHTML=`
      <td>${o.name}</td>
      <td>
        <div class="progress-container">
          <div class="progress-bar" style="width:${a}%;background:${o.color}">
            <div class="progress-label">${o.probability}%</div>
          </div>
        </div>
      </td>
      <td class="cashback-value">${o.p10.toFixed(1)}</td>
      <td class="cashback-value highlight">${o.mean.toFixed(1)}</td>
      <td class="cashback-value">${o.p90.toFixed(1)}</td>
    `,r.appendChild(s)})}function E(n,t){n.forEach(e=>{const i=document.querySelector(`${t.PITY_TABLE} tr[data-banner="${e.banner}"]`);i&&(i.querySelector('[data-control="pity-4"]').value=e.pity4,i.querySelector('[data-control="pity-5"]').value=e.pity5,i.querySelector(".guarantee-4").checked=e.guarantee4,i.querySelector(".guarantee-5").checked=e.guarantee5,e.caprad&&i.querySelector('[data-control="capRad"]')&&(i.querySelector('[data-control="capRad"]').value=e.caprad),e.epPath&&i.querySelector('[data-control="epPath"]')&&(i.querySelector('[data-control="epPath"]').value=e.epPath))})}function x(n,t){document.querySelectorAll(`${t.CONSTELLATION_TABLE} tbody tr`).forEach((i,r)=>{const o=n[r];o&&i.querySelectorAll("td:nth-child(n+2) input").forEach((a,l)=>{o[l]!==void 0&&(a.value=o[l])})})}function k(n){if(!n||!Array.isArray(n))return;document.querySelectorAll("#rate-up-table select.custom-select").forEach((e,i)=>{n[i]!==void 0&&(e.value=n[i])})}function N(){document.querySelectorAll(".help-btn").forEach(t=>{t.classList.toggle("hidden")})}function it(n,t,e,i){const r=document.getElementById("import-file-input");if(!r){console.error("Import file input not found!");return}const o=s=>U(s,n,t,e,i);r.removeEventListener("change",r.__handleFile),r.addEventListener("change",o),r.__handleFile=o}async function U(n,t,e,i,r){const o=n.target.files[0];if(o)try{const s=await o.text(),a=JSON.parse(s);let l=null;a.exportFormat==="GachaCalculatorData"?l=a:e&&(l=e(a)),l?($(l,r),i.validateAll(),t.saveTables()):alert("Error: Invalid or unsupported file format.")}catch(s){console.error("File import error:",s)}finally{n.target.value=""}}function $(n,t){n.pity&&E(n.pity,t),n.constellation&&x(n.constellation,t)}function ot(n){const t={exportFormat:"GachaCalculatorData",version:"1.0",exportedAt:new Date().toISOString(),pity:n.getPityData(),constellation:n.getConstellationData()},e=JSON.stringify(t,null,2),i=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(i),o=document.createElement("a");o.href=r;const s=new Date().toISOString().slice(0,10);o.download=`gachaCalc-data-${s}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r),console.log("Data exported successfully.")}function rt(n,t=null){const e=new A(n,t);return e.initialize(),e}function nt(n,t=null){return new _(n,t).initialize()}class A{constructor(t,e=null){this.pathsConfig=t,this.savedData=e,this.groupColorMap=new Map,this.rowsContainer=document.querySelector(".rows-container"),this.addButton=document.getElementById("add-btn"),this.COLORS={UNIQUE_GROUP:"#f0f0f0",PRESET_HUES:[0,120,240,60,180,300]}}initialize(){this.rowsContainer.innerHTML="",this.savedData&&this.savedData.pullPlan?this.savedData.pullPlan.forEach(t=>{this.rowsContainer.appendChild(this.createRow(null,t))}):this.rowsContainer.appendChild(this.createRow()),this.addButton.addEventListener("click",()=>{this.rowsContainer.appendChild(this.createRow())})}createRow(t=null,e=null){const i=this.createRowElement();return this.setupRowEvents(i),this.initializeRowData(i,t,e),i}createRowElement(){return document.getElementById("row-template").content.cloneNode(!0).querySelector(".row")}setupRowEvents(t){const e=t.querySelector(".dropdown"),i=t.querySelector(".type-selector");this.setupDropdownHandler(t,e,i),this.setupTypeChangeHandler(t,i),this.setupButtonHandlers(t)}setupDropdownHandler(t,e,i){e.addEventListener("click",r=>{r.stopPropagation(),e.classList.toggle("dropdown--open")}),t.querySelectorAll(".dropdown__item").forEach(r=>{r.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),i.value=r.dataset.value,i.dispatchEvent(new Event("change")),e.classList.remove("dropdown--open")})}),document.addEventListener("click",r=>{e.contains(r.target)||e.classList.remove("dropdown--open")})}setupTypeChangeHandler(t,e){e.addEventListener("change",()=>{const i=e.options[e.selectedIndex],r=t.querySelector(".type-icon"),o=t.querySelector(".type-text");r.src=i.dataset.icon,o.textContent=i.textContent,this.updatePathSelector(t,e.value),this.handleTypeChangeGroupUpdate(t,e.value)})}handleTypeChangeGroupUpdate(t,e){const i=t.dataset.group;i&&!i.startsWith("unique")&&(t.dataset.group=`unique${e.charAt(0).toUpperCase()+e.slice(1)}`,t.style.setProperty("--group-color",this.COLORS.UNIQUE_GROUP))}setupButtonHandlers(t){t.querySelector(".btn--chainAdd").addEventListener("click",()=>{this.rowsContainer.appendChild(this.createRow(t))}),t.querySelector(".btn--delete").addEventListener("click",()=>{this.handleRowDeletion(t)})}handleRowDeletion(t){const e=t.dataset.group;e&&!e.startsWith("unique")&&Array.from(this.rowsContainer.querySelectorAll(".row")).filter(r=>r.dataset.group===e).length===1&&this.groupColorMap.delete(e),t.remove()}initializeRowData(t,e,i){i?this.initializeFromSavedData(t,i):e?this.initializeFromParent(t,e):this.initializeNewRow(t)}initializeFromSavedData(t,e){const i=t.querySelector(".type-selector");i.value=e.type||"char",this.updateVisualType(t,i.value),this.setGroupAndColor(t,e.group),this.updatePathSelector(t,i.value,e.from,e.to)}initializeFromParent(t,e){const i=e.dataset.group,r=e.querySelector(".type-selector").value,o=e.querySelector(".second-select").value,s=t.querySelector(".type-selector");s.value=r,this.updateVisualType(t,r),i.startsWith("unique")?this.convertToNewGroup(e,t):this.inheritExistingGroup(t,i),this.updatePathSelector(t,r,o)}convertToNewGroup(t,e){const i=this.generateNewGroupId(),r=this.getHueForGroup(i);[t,e].forEach(o=>{o.dataset.group=i,o.style.setProperty("--group-color",`hsl(${r}, 80%, 70%)`)}),this.groupColorMap.set(i,r)}inheritExistingGroup(t,e){t.dataset.group=e;const i=this.groupColorMap.get(e);i!==void 0&&t.style.setProperty("--group-color",`hsl(${i}, 80%, 70%)`)}initializeNewRow(t){const i=t.querySelector(".type-selector").value;t.dataset.group=`unique${i.charAt(0).toUpperCase()+i.slice(1)}`,t.style.setProperty("--group-color",this.COLORS.UNIQUE_GROUP),this.updatePathSelector(t,i)}updateVisualType(t,e){const i=t.querySelector(".type-selector"),r=i.options[i.selectedIndex],o=t.querySelector(".type-icon"),s=t.querySelector(".type-text");o.src=r.dataset.icon,s.textContent=r.textContent}updatePathSelector(t,e,i=null,r=null){const o=t.querySelector(".first-select"),s=t.querySelector(".second-select"),a=this.pathsConfig[e]||this.pathsConfig.char;this.populateSelect(o,a.slice(0,-1)),this.populateSelect(s,a.slice(1)),this.setInitialPathValues(o,s,a,i,r)}populateSelect(t,e){t.innerHTML="",e.forEach(i=>{const r=document.createElement("option");r.value=i,r.textContent=i,t.appendChild(r)})}setInitialPathValues(t,e,i,r,o){if(r&&i.includes(r)){t.value=r;const s=i.indexOf(r);e.value=o&&i.includes(o)&&i.indexOf(o)>s?o:i[Math.min(s+1,i.length-1)]}else t.value=i[0],e.value=i[1]}generateNewGroupId(){const t=Array.from(this.groupColorMap.keys()).map(e=>parseInt(e.replace(/\D/g,""))).filter(e=>!isNaN(e)).sort((e,i)=>e-i);for(let e=1;e<=t.length+1;e++)if(!t.includes(e))return`group${e}`;return`group${t.length+1}`}getHueForGroup(t){const e=parseInt(t.replace(/\D/g,""));return e<=this.COLORS.PRESET_HUES.length?this.COLORS.PRESET_HUES[e-1]:e*137.5%360}setGroupAndColor(t,e){if(t.dataset.group=e,e.startsWith("unique"))t.style.setProperty("--group-color",this.COLORS.UNIQUE_GROUP);else{let i=this.groupColorMap.get(e);i===void 0&&(parseInt(e.replace(/\D/g,"")),i=this.getHueForGroup(e),this.groupColorMap.set(e,i)),t.style.setProperty("--group-color",`hsl(${i}, 80%, 70%)`)}}getState(){return Array.from(this.rowsContainer.querySelectorAll(".row")).map(e=>({type:e.querySelector(".type-selector").value,from:e.querySelector(".first-select").value,to:e.querySelector(".second-select").value,group:e.dataset.group}))}}class _ extends A{constructor(t,e=null){super(t,e||null)}initialize(){return this.rowsContainer.innerHTML="",this.savedData&&this.savedData.pullPlan?this.savedData.pullPlan.forEach((t,e)=>{const i={...t,pity:this.savedData.pity4?.[e]||0,guarantee:this.savedData.guarantee4?.[e]||!1};this.rowsContainer.appendChild(this.createRow(null,i))}):this.rowsContainer.appendChild(this.createRow()),this.addButton.addEventListener("click",()=>{this.rowsContainer.appendChild(this.createRow())}),this}createRow(t=null,e=null){const i=super.createRow(t,e);return this.addPityGuaranteeToRow(i,e),i}addPityGuaranteeToRow(t,e){const i=t.querySelector('[data-control="pity-4"]'),r=t.querySelector(".guarantee-4");e&&(i&&e.pity!==void 0&&(i.value=e.pity),r&&e.guarantee!==void 0&&(r.checked=e.guarantee)),i.addEventListener("input",function(){let o=this.value;o.length>1&&o.startsWith("0")&&(this.value=o.replace(/^0+/,""),this.value===""&&(this.value="0"));let s=parseInt(this.value)||0;s>10?(this.value=10,q(this)):s<0&&(this.value=0,q(this))})}}function q(n){n.style.borderColor="#a71919",n.style.outline="1px solid #a71919",n.classList.add("flicker"),setTimeout(()=>{n.classList.remove("flicker"),n.style.borderColor="",n.style.outline=""},500)}function st(n=null){const t=document.querySelector('[data-control="probability"]'),e=document.querySelector('[data-control="pulls"]'),i=document.querySelectorAll(".mode-label");let r;n?r=n:r="probability",o(),i.forEach(s=>{s.addEventListener("click",function(){r=this.getAttribute("data-target"),o()})}),t.addEventListener("input",function(){r="probability",o()}),e.addEventListener("input",function(){r="pulls",o()});function o(){i.forEach(s=>{const a=s.getAttribute("data-target")===r;s.classList.toggle("active",a)})}}const v={TABLES:1,CALCULATIONS:1,PULL_PLANS:1,BUTTONS:1};function at(n,t){if(!n)throw new Error("Persistence factory requires a namespace.");const e={TABLES:`gacha_tables_${n}_v1`,CALCULATIONS:`gacha_calc_${n}_v1`,PULL_PLANS:`gacha_plans_${n}_v1`,BUTTONS:"gacha_buttons_${namespace}_v1"};return{DEBOUNCE_TIME:1500,debug:!1,saveTimeout:null,init(){this.setupTableListeners(),window.addEventListener("beforeunload",()=>this.saveTables())},saveCalculation(i){this._save(e.CALCULATIONS,{_schema:v.CALCULATIONS,...i})},loadCalculation(){return this._validate(this._load(e.CALCULATIONS),"CALCULATIONS")},saveTables(){this._save(e.TABLES,{_schema:v.TABLES,pity:this.getPityData(),constellation:this.getConstellationData(),rateUps:this.getRateUpData()})},loadTables(){return this._validate(this._load(e.TABLES),"TABLES")},saveButtons(){this._save(e.BUTTONS,{_schema:v.BUTTONS,isHidden:this.areButtonsHidden()})},loadButtons(){return this._load(e.BUTTONS)},getPityData(){return Array.from(document.querySelectorAll(`${t.PITY_TABLE} tbody tr`)).map(i=>({banner:i.dataset.banner,...i.querySelector('[data-control="pity-4"]')&&{pity4:i.querySelector('[data-control="pity-4"]').value},...i.querySelector('[data-control="pity-5"]')&&{pity5:i.querySelector('[data-control="pity-5"]').value},...i.querySelector(".guarantee-4")&&{guarantee4:i.querySelector(".guarantee-4").checked},...i.querySelector(".guarantee-5")&&{guarantee5:i.querySelector(".guarantee-5").checked},...i.querySelector('[data-control="capRad"]')&&{caprad:i.querySelector('[data-control="capRad"]').value},...i.querySelector('[data-control="epPath"]')&&{epPath:i.querySelector('[data-control="epPath"]').value}}))},getConstellationData(){return Array.from(document.querySelectorAll(`${t.CONSTELLATION_TABLE} tbody tr`)).map(i=>Array.from(i.querySelectorAll("td:nth-child(n+2) input")).map(r=>r.value))},getRateUpData(){return Array.from(document.querySelectorAll("#rate-up-table select.custom-select")).map(i=>i.value)},areButtonsHidden(){return document.querySelector(".help-btn").classList.contains("hidden")},setupTableListeners(){const i=[`${t.PITY_TABLE} input`,`${t.CONSTELLATION_TABLE} input`,"#rate-up-table select"].join(",");document.querySelectorAll(i).forEach(r=>{r.addEventListener("input",()=>this.queueSave())})},queueSave(){clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(()=>this.saveTables(),this.DEBOUNCE_TIME)},_save(i,r){try{localStorage.setItem(i,JSON.stringify(r))}catch(o){console.error("Storage error:",o),this._handleStorageError()}},_load(i){try{const r=localStorage.getItem(i);return r?JSON.parse(r):null}catch(r){return console.error("Load error:",r),null}},_validate(i,r){return i?typeof i._schema>"u"?i:i._schema!==v[r]?(console.warn(`Schema version mismatch for ${r}`),null):i:null},_handleStorageError(){Object.values(e).forEach(i=>{try{localStorage.removeItem(i)}catch(r){console.error("Cleanup failed:",r)}})}}}class lt{constructor(t){this.constellationMap=t,this.availableConstellationCounts=[],this.isInitialized=!1}initialize(){if(this.isInitialized)return;const t=document;t.addEventListener("focus",e=>{if(e.target.matches('input[type="number"]'))try{e.target.select()}catch(i){console.warn("Could not select text in input.",i)}},{capture:!0}),t.addEventListener("keydown",e=>{["Backspace","Delete","Tab","Escape","Enter","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(e.key)||(e.ctrlKey||e.metaKey)&&["a","c","v","x"].includes(e.key.toLowerCase())||/^\d$/.test(e.key)||e.preventDefault()}),t.addEventListener("input",e=>{const i=e.target,r=i.closest("table");if(r)switch(r.id){case"constellation-table":{const o=i.closest("tr");o&&this.validateRowSum(o),this.updateAvailableCountsCache(),this.validateRateUpEligibility();break}case"rate-up-table":{this.validateRateUpEligibility();break}}}),this.isInitialized=!0}validateAll(){document.querySelectorAll(".is-invalid").forEach(e=>e.classList.remove("is-invalid")),this.updateAvailableCountsCache();const t=document.querySelector("#constellation-table");t&&t.querySelectorAll("tbody tr").forEach(e=>this.validateRowSum(e)),this.validateRateUpEligibility()}updateAvailableCountsCache(){const t=new Array(Object.keys(this.constellationMap).length).fill(0);document.querySelectorAll('#constellation-table tbody tr[data-rarity="4"]').forEach(i=>{i.querySelectorAll('input[type="number"]').forEach((r,o)=>{t[o]+=parseInt(r.value,10)||0})}),this.availableConstellationCounts=t}getRateUpUsage(){const t=new Array(Object.keys(this.constellationMap).length).fill(0);return document.querySelectorAll("#rate-up-table select.custom-select").forEach(e=>{const i=this.constellationMap[e.value];i!==void 0&&t[i]++}),t}validateRowSum(t){if(!t.dataset.targetSum)return;const e=parseFloat(t.dataset.targetSum),i=t.querySelectorAll('input[type="number"]');let r=0;i.forEach(o=>r+=parseFloat(o.value)||0),i.forEach(o=>o.classList.toggle("is-invalid",r!==e))}validateRateUpEligibility(){const t=this.getRateUpUsage(),e=this.availableConstellationCounts.map((i,r)=>t[r]>i);document.querySelectorAll("#rate-up-table select.custom-select").forEach(i=>{const r=this.constellationMap[i.value],o=r!==void 0&&e[r];i.classList.toggle("is-invalid",o)})}isDataValid(){const t=document.querySelectorAll('#pity-table input[type="number"]');for(const i of t)if(!this.isIndividualInputValid(i))return!1;const e=document.querySelectorAll("#constellation-table tbody tr");for(const i of e)if(!this.isRowSumValid(i))return!1;return!this.isRateUpOverBudget()}isIndividualInputValid(t){if(t.value===""||/^\d+$/.test(t.value)){const e=parseInt(t.value,10),i=parseInt(t.min,10),r=parseInt(t.max,10);return(!t.hasAttribute("min")||e>=i)&&(!t.hasAttribute("max")||e<=r)}return!1}isRowSumValid(t){if(!t.dataset.targetSum)return!0;const e=parseFloat(t.dataset.targetSum),i=t.querySelectorAll('input[type="number"]');let r=0;return i.forEach(o=>r+=parseFloat(o.value)||0),r===e}isRateUpOverBudget(){const t=this.getRateUpUsage();return this.availableConstellationCounts.some((e,i)=>t[i]>e)}}function ct(){document.querySelectorAll(".tab-nav").forEach(t=>{t.addEventListener("click",e=>{if(!e.target.matches(".tab-link[data-tab-target]"))return;const i=e.target,r=i.closest(".tab-panel-card"),o=i.dataset.tabTarget,s=r.querySelector(o);if(!s){console.error(`Tab target not found: ${o}`);return}r.querySelectorAll(".tab-link").forEach(a=>a.classList.remove("active")),r.querySelectorAll(".tab-pane").forEach(a=>a.classList.remove("active")),i.classList.add("active"),s.classList.add("active")})})}class ut{constructor(t){this.tourSteps=[],this.currentTourStepIndex=0,this.isTourActive=!1,this.isShowingHelp=!1,this.pausedTourStepIndex=-1,this.currentHighlightedElement=null,this.observers=null,this.currentDisplayConfig=null,this.boundHandleWindowResize=this.handleReposition.bind(this),this.boundHandleHighlightUpdate=this.handleHighlightUpdate.bind(this),this.container=document.createElement("div"),this.container.id="chibi-container",this.container.innerHTML=`
            <div class="chibi-tutorial-overlay-piece" data-overlay="top"></div>
            <div class="chibi-tutorial-overlay-piece" data-overlay="bottom"></div>
            <div class="chibi-tutorial-overlay-piece" data-overlay="left"></div>
            <div class="chibi-tutorial-overlay-piece" data-overlay="right"></div>
        `,this.container.innerHTML+=t,document.body.appendChild(this.container),this.overlays={top:this.container.querySelector('[data-overlay="top"]'),bottom:this.container.querySelector('[data-overlay="bottom"]'),left:this.container.querySelector('[data-overlay="left"]'),right:this.container.querySelector('[data-overlay="right"]')},this.chibiGroup=this.container.querySelector(".chibi-group"),this.bubbleText=this.container.querySelector(".bubble-text"),this.nextButton=this.container.querySelector(".btn--tutorial_next"),this.endButton=this.container.querySelector(".btn--tutorial_end"),this.handleNext=this.handleNext.bind(this),this.hide=this.hide.bind(this),this.handleReposition=this.handleReposition.bind(this),this.nextButton.addEventListener("click",this.handleNext),this.endButton.addEventListener("click",this.hide)}startTour(t){if(!t||t.length===0){console.error("ChibiTutorial: No steps provided for the tour.");return}this.tourSteps=t,this.pausedTourStepIndex===-1?this.currentTourStepIndex=0:(this.currentTourStepIndex=this.pausedTourStepIndex,this.pausedTourStepIndex=-1),this.isTourActive=!0,this.isShowingHelp=!1,this.nextButton.textContent=">>",this.endButton.style.display="inline-block",this.#n(),this.showTourStep(this.currentTourStepIndex)}showTourStep(t){if(t>=this.tourSteps.length){this.hide();return}const e=this.tourSteps[t];this.showDisplay(e)}showDisplay(t){this.currentDisplayConfig=t,this.#i(),this.chibiGroup.classList.remove("chibi-on-left"),t.chibiSide==="left"&&this.chibiGroup.classList.add("chibi-on-left");const e=this.container.querySelector(".bubble-wrapper");e.classList.remove("bubble-wrapper--big","bubble-wrapper--small");const i=t.size;i&&e.classList.add(`bubble-wrapper--${i}`),this.bubbleText.innerHTML=t.text,this.container.style.display="block",this.container.style.height=`${document.documentElement.scrollHeight}px`;let r=null,o=!1;if(t.clickTab){const s=document.querySelector(t.clickTab);s?(s.dispatchEvent(new Event("click",{bubbles:!0})),o=!0):console.warn(`ChibiTutorial: Tab button not found for selector "${t.clickTab}".`)}if(t.action==="click"){const s=document.querySelector(t.element);s?(s.dispatchEvent(new Event("click",{bubbles:!0})),o=!0):console.error(`ChibiTutorial: Element not found for selector "${t.element}" to perform action "${t.action}".`)}if(t.element){r=document.querySelector(t.element);const s=document.querySelector(".tutorial-chibi");if(this.#t(r),!r){console.error(`ChibiTutorial: Element not found for selector "${t.element}". Skipping display.`),this.isTourActive&&this.handleNext();return}o&&setTimeout(()=>{this.currentHighlightedElement=r,this.currentHighlightedElement.classList.add("chibi-tutorial-focused-element"),this.observers&&this.observers.targetObserver&&this.observers.targetObserver.observe(this.currentHighlightedElement),this.#t(this.currentHighlightedElement)},50);const a=[r,this.chibiGroup,s];this.#o(a)}else this.#t(null),this.chibiGroup.scrollIntoView({behavior:"smooth",block:"nearest"});window.addEventListener("resize",this.boundHandleWindowResize)}#o(t){if(t.length===0)return;const e=this.getCombinedBoundingRect(t),i=document.createElement("div");i.style.cssText=`
        position: absolute;
        top: ${e.top}px;
        height: ${e.height}px;
        pointer-events: none;
        visibility: hidden;
    `,document.body.appendChild(i),i.scrollIntoView({behavior:"smooth",block:"nearest"}),setTimeout(()=>{document.body.removeChild(i)},1e3)}getCombinedBoundingRect(t){const e=t.map(l=>l.getBoundingClientRect()),i=Math.min(...e.map(l=>l.left)),r=Math.min(...e.map(l=>l.top)),o=Math.max(...e.map(l=>l.right)),s=Math.max(...e.map(l=>l.bottom)),a=10;return{top:r+window.pageYOffset-a,left:i+window.pageXOffset-a,width:o-i+a*2,height:s-r+a*2,right:o+window.pageXOffset+a,bottom:s+window.pageYOffset+a}}hide(){this.container.style.display="none",this.chibiGroup.classList.remove("chibi-on-left"),this.#i(),this.#s(),this.currentDisplayConfig=null,this.isShowingHelp||(this.isTourActive=!1,this.currentTourStepIndex=0,this.pausedTourStepIndex=-1),this.isShowingHelp=!1,this.nextButton.textContent="Next",this.endButton.style.display="inline-block",window.removeEventListener("resize",this.boundHandleWindowResize)}#i(){this.currentHighlightedElement&&(this.observers&&this.observers.targetObserver&&this.observers.targetObserver.unobserve(this.currentHighlightedElement),this.currentHighlightedElement.classList.remove("chibi-tutorial-focused-element"),this.currentHighlightedElement=null)}handleNext(){this.isTourActive?(this.currentTourStepIndex++,this.showTourStep(this.currentTourStepIndex)):this.isShowingHelp?(this.hide(),this.pausedTourStepIndex!==-1&&this.startTour(this.tourSteps)):this.hide()}showHelp(t,e=null){if(!t){console.warn("ChibiTutorial: No help configuration provided.");return}let i=null;if(t.tourStepId){const r=this.tourSteps.findIndex(o=>o&&o.id===t.tourStepId);if(r!==-1)i={...this.tourSteps[r]};else if(console.warn(`ChibiTutorial: Tour step with ID '${t.tourStepId}' not found.`),t.text)i={text:t.text,element:t.element,clickTab:t.clickTab,position:t.position||"bottom",chibiSide:t.chibiSide||"right",size:t.size||""};else return}else t.text&&(i={text:t.text,element:t.element,clickTab:t.clickTab,position:t.position||"bottom",chibiSide:t.chibiSide||"right",size:t.size||""});!i.element&&e&&(i.element=e),i&&(this.isTourActive&&(this.pausedTourStepIndex=this.currentTourStepIndex,this.isTourActive=!1),this.isShowingHelp=!0,this.nextButton.textContent="OK",this.endButton.style.display="none",this.showDisplay(i))}handleHighlightUpdate(){window.requestAnimationFrame(()=>{if(!this.currentHighlightedElement||!this.isTourActive&&!this.isShowingHelp)return;this.container.style.height=`${document.documentElement.scrollHeight}px`;const t=this.currentHighlightedElement.getBoundingClientRect(),e={top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX,width:t.width,height:t.height};this.#e(e)})}handleReposition(){window.requestAnimationFrame(()=>{!this.currentHighlightedElement||!this.isTourActive&&!this.isShowingHelp||(this.container.style.height=`${document.documentElement.scrollHeight}px`,this.#t(this.currentHighlightedElement))})}#t(t){if(t===null)this.chibiGroup.style.top="50%",this.chibiGroup.style.left="50%",this.chibiGroup.style.transform="translate(-50%, -50%)",this.#e(t);else{this.container.style.height=`${document.documentElement.scrollHeight}px`;const e=t.getBoundingClientRect(),i={top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX,width:e.width,height:e.height};this.#e(i),this.#r(i)}}#r(t){const e=this.currentDisplayConfig||{},i=document.querySelector(".tutorial-chibi"),r=this.chibiGroup.getBoundingClientRect(),o=i.getBoundingClientRect(),s=[this.chibiGroup,i],a=this.getCombinedBoundingRect(s),l=10;let d;window.innerWidth<900||window.innerWidth<620?e.position==="top"?d="top":d="bottom":d=e.position||"bottom";let c,h;switch(d){case"top":c=t.top-a.height+l,h=t.left+t.width/2-a.width/2;break;case"right":c=t.top+t.height/2-a.height/2+l/2,h=t.right+l;break;case"left":c=t.top+t.height/2-a.height/2+l/2,h=t.left-a.width+l;break;default:c=t.bottom+l,h=t.left+t.width/2-a.width/2;break}o.left<r.left&&(h=h-(o.left-r.left)),o.top<r.top&&(c=c-o.top+r.top),(h+a.width>window.innerWidth||h<l)&&(h=l),this.chibiGroup.style.left=`${h}px`,this.chibiGroup.style.top=`${c}px`,this.chibiGroup.style.transform=""}#e(t){if(!t){this.overlays.top.style.cssText="width: 100%; height: 100%;",this.overlays.bottom.style.cssText="width: 0; height: 0;",this.overlays.left.style.cssText="width: 0; height: 0;",this.overlays.right.style.cssText="width: 0; height: 0;";return}this.overlays.left.style.cssText=`top: 0; left: 0; width: ${t.left}px; height: 100%;`,this.overlays.right.style.cssText=`top: 0; left: ${t.right}px; width: calc(100% - ${t.right}px); height: 100%;`,this.overlays.top.style.cssText=`top: 0; left: ${t.left}px; width: ${t.width}px; height: ${t.top}px;`,this.overlays.bottom.style.cssText=`top: ${t.bottom}px; left: ${t.left}px; width: ${t.width}px; height: calc(100% - ${t.bottom}px);`}#n(){this.observers={targetObserver:new ResizeObserver(this.boundHandleHighlightUpdate),bodyObserver:new ResizeObserver(this.boundHandleHighlightUpdate),mutationObserver:new MutationObserver(this.boundHandleHighlightUpdate)},this.observers.bodyObserver&&this.observers.bodyObserver.observe(document.body),this.observers.mutationObserver&&this.observers.mutationObserver.observe(document.body,{attributes:!0,childList:!0,subtree:!0})}#s(){this.observers&&(this.observers.targetObserver&&this.observers.targetObserver.disconnect(),this.observers.bodyObserver&&this.observers.bodyObserver.disconnect(),this.observers.mutationObserver&&this.observers.mutationObserver.disconnect(),this.observers=null)}showError(t,e=".pull-plan-section"){const i={text:`<p style="color: #ff6b6b;">${t}</p>`,element:e,position:"left",chibiSide:"left",size:"small"};this.showHelp(i)}}const f=(n,t=!1)=>n?t?n.checked:parseInt(n.value)||0:null;function ht(n,t,e,i){const r=document.getElementById("pity-panel"),o=document.getElementById("constellation-panel"),s=t.paths;if(!r||!o)return console.error("Required tab panels not found. Cannot get page configuration."),null;const a=(g,S)=>{if(!S)return[];const C=S.querySelector("#constellation-table");if(!C)return console.warn("Could not find the constellation table inside the panel:",S),[];const P=C.querySelectorAll(`tr[data-rarity="${g}"] .custom-input`);return Array.from(P).map(O=>parseInt(O.value)||0)},l=r.querySelector(`${e.PITY_ROW}[data-banner="character"]`),d=r.querySelector(`${e.PITY_ROW}[data-banner="weapon"]`),c=D(s),h={},u={},p={},y={},b={};return i.isCharacter&&(h.char=f(l.querySelector('[data-control="pity-5"]')),u.char=f(l.querySelector('[data-control="pity-4"]')),p.char=f(l.querySelector(".guarantee-5"),!0),y.char=f(l.querySelector(".guarantee-4"),!0),i.isCapRad&&(b.capRad=f(l.querySelector('[data-control="capRad"]')))),i.isWeapon&&(h.wep=f(d.querySelector('[data-control="pity-5"]')),u.wep=f(d.querySelector('[data-control="pity-4"]')),p.wep=f(d.querySelector(".guarantee-5"),!0),y.wep=f(d.querySelector(".guarantee-4"),!0),i.isEpitPath&&(b.epitPath=f(d.querySelector('[data-control="epPath"]')))),{SSR:{pity:h,guarantee:p,special:b,consCountStandard:a(5,o),pullPlan:c.typeArray,cashbackRoadmap:c.cashbackArray},SR:{pity:u,guarantee:y,rateUps:z(),consCount:a(4,o)}}}function dt(){const n=document.querySelectorAll(".row"),t=[];return Array.from(n).slice(1).forEach(i=>{const r=i.dataset.group,o=i.querySelector(".type-selector")?.value||"char",s=i.querySelector(".first-select")?.value||"None",a=i.querySelector(".second-select")?.value||"None";t.push({group:r,type:o,from:s,to:a})}),{pullPlan:t}}function D(n){const t=document.querySelectorAll(".row"),e=[],i=[],r=Array.from(t).slice(1);let o=0;return r.forEach(s=>{const a=s.querySelector(".type-selector")?.value||"char",l=s.querySelector(".first-select")?.value||"None",d=s.querySelector(".second-select")?.value||"None",c=a==="char"?n.char:n.wep,h=c.indexOf(l),u=c.indexOf(d);if(h===-1||u===-1||h>=u)return;const p=u-h;let y=h,b=0;for(let g=0;g<p;g++)a==="char"&&y===0?b="none":b="regular",e.push({type:a,bannerCount:o}),i.push(b),y++;o++}),{typeArray:e,cashbackArray:i}}function pt(n){const t=document.querySelectorAll(".row"),e=Array.from(t).slice(1);let i=["None"];const r=n.char,o=n.wep;return e.forEach(s=>{const a=s.querySelector(".type-selector")?.value||"char",l=s.querySelector(".first-select")?.value||"None",d=s.querySelector(".second-select")?.value||"None",c=a==="char"?r:o,h=c.indexOf(l),u=c.indexOf(d);if(h===-1||u===-1||h>=u)return;const p=c.slice(h+1,u+1);i.push(...p)}),i}function z(){const n=document.querySelectorAll("#rate-up-table select.custom-select");let t=[];return n.length===0?(console.error("Could not find any rate-up select elements."),[]):(n.forEach(e=>{const i=e.value;i!=="unknown"&&(i!==void 0?t.push(i):console.warn(`Invalid or unhandled rate-up value found: "${i}"`))}),t)}function ft(){const n=document.querySelector(".mode-label.active").getAttribute("data-target");if(n==="probability")return{type:n,value:parseInt(document.querySelector('[data-control="probability"]').value)/100};if(n==="pulls")return{type:n,value:parseInt(document.querySelector('[data-control="pulls"]').value)}}let m=null;function G(){const n=document.getElementById("myChart").getContext("2d");m=new Chart(n,{type:"line",data:{labels:[],datasets:[]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{ticks:{color:"#b8c2d0",callback:function(t){return(t*100).toFixed(0)+"%"}},grid:{color:"rgba(58, 58, 106, 0.5)"},beginAtZero:!0,min:0,max:1},x:{ticks:{color:"#b8c2d0"},grid:{color:"rgba(58, 58, 106, 0.5)"}}},plugins:{legend:{labels:{color:"#f5f5f5",sort:(t,e)=>t.datasetIndex-e.datasetIndex}},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(t){let e=t.dataset.label||"";return e&&(e+=": "),e+=(t.parsed.y*100).toFixed(2)+"%",e}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}})}function F(n){const t=["#FF9800","#9C27B0","#E91E63","#00BCD4"];return t[n%t.length]}function W(n){const t=["rgba(255, 99, 132, 0.1)","rgba(255, 159, 64, 0.1)","rgba(255, 205, 86, 0.1)","rgba(75, 192, 192, 0.1)","rgba(153, 102, 255, 0.1)"];return t[(n-2)%t.length]}function yt(n,t,e){m||G();const i=n.length,r=e.slice(1);m.data.labels=t,m.data.datasets=n.map((o,s)=>{const a=s===0?"#2196F3":s===1?"#4CAF50":F(s);return{label:r[s],data:o,borderColor:a,backgroundColor:s===0?"rgba(33, 150, 243, 0.1)":s===1?"rgba(76, 175, 80, 0.1)":W(s),fill:!0,tension:.4,order:i-s,borderWidth:3,pointRadius:0,pointHoverRadius:5}}),m.update()}function bt(n){let t=n[0].length,e=Array.from({length:t-1},()=>Array.from({length:n.length+1},()=>0)),i=[0];for(let r=0;r<n.length;r++){let o=0;for(const c of n[r])o+=c;let s=0;const a=r+1;i.push(a);const l=n[r],d=l.length-1;for(let c=d;c>0;c--)s+=l[c],e[c-1][a]=s/o}return{data:e,labels:i}}function mt(n){document.querySelector(".mode-label.active").getAttribute("data-target")==="probability"?document.querySelector('.input-lock-container input[data-control="pulls"]').value=V(n,parseInt(document.querySelector('[data-control="probability"]').value)):document.querySelector('.input-lock-container input[data-control="probability"]').value=j(n,parseInt(document.querySelector('[data-control="pulls"]').value))}function V(n,t){t===100&&(t=99.9);let e=n.length-1,i=!0,r=0,o=0;for(;i;)n[e][o]>t/100&&(r=o,i=!1),o++;return r}function j(n,t){let e=n.length-1;return n[e].length<=t?100:Math.round(n[e][t]*100)}function gt(n,t){for(const e of n){const i=L(e.rateUps);if(!Y(i,t)){e.probability=0;continue}const r=I(i,t),o=X(n,t);e.probability=o===0?0:r/o}}function L(n){const t={};for(let e=0;e<n.length;e++){const i=n[e];i>0&&(t[e]=i)}return t}function Y(n,t){return Object.entries(n).every(([e,i])=>t[e]>=i)}function I(n,t){return Object.entries(n).reduce((e,[i,r])=>e*J(t[i],r),1)}function X(n,t){return n.reduce((e,i)=>{const r=L(i.rateUps),o=I(r,t);return e+o},0)}function J(n,t){if(t<0||t>n)return 0;if(t===0||t===n)return 1;t=Math.min(t,n-t);let e=1;for(let i=1;i<=t;i++)e*=(n-t+i)/i;return e}function vt(n,t){if(!Number.isInteger(n)||n<0)throw new Error("Number of trials (n) must be a non-negative integer.");let e=0,i=0,r=[],o=1;for(;e<=n;)i=o*Math.pow(t,e)*Math.pow(1-t,n-e),r.push(i),e++,o=o*(n+1-e)/e;return r}class St{constructor(t,e,i){this.initialState=[...t],this.totalItems=e,this.config=i,this.maxType=i.maxType,this.nTypes=t.length,this.points=Array(this.nTypes).fill(0);for(let r=1;r<this.maxType;r++)this.points[r]=i.regularPoints;this.points[this.maxType]=i.specialPoints,this.reset()}reset(){this.expected=[...this.initialState],this.mean=0,this.secondMoment=0,this.variance=0,this.stateSecondMoments=Array(this.nTypes).fill(0).map(()=>Array(this.nTypes).fill(0));for(let t=0;t<this.nTypes;t++)for(let e=0;e<this.nTypes;e++)this.stateSecondMoments[t][e]=this.initialState[t]*this.initialState[e];this.pointStateCrossMoments=Array(this.nTypes).fill(0),this.results=[{mean:0,variance:0}],this.step=0}computeStep(){const t=this.totalItems;this.step++;let e=0,i=0;for(let l=0;l<this.nTypes;l++){const d=this.expected[l]/t;e+=this.points[l]*d,i+=this.points[l]**2*d}let r=0;for(let l=0;l<this.nTypes;l++)r+=this.points[l]*this.pointStateCrossMoments[l];r/=t;const o=this.secondMoment+2*r+i,s=this.mean+e,a=o-s**2;return this.results.push({mean:s,variance:a}),this.updateState(),this.secondMoment=o,this.mean=s,this.variance=a,{mean:s,variance:a,step:this.step}}updateState(){const t=this.totalItems,e=Array(this.nTypes).fill(0);for(let o=0;o<this.maxType;o++)e[o]=this.expected[o]*(t-1)/t;e[this.maxType]=this.expected[this.maxType];for(let o=0;o<this.maxType;o++)e[o+1]+=this.expected[o]/t;const i=Array(this.nTypes).fill(0).map(()=>Array(this.nTypes).fill(0));for(let o=0;o<this.nTypes;o++)for(let s=0;s<this.nTypes;s++)i[o][s]=this.stateSecondMoments[o][s];for(let o=0;o<this.maxType;o++){const s=Array(this.nTypes).fill(0);s[o]=-1,s[o+1]=1;for(let a=0;a<this.nTypes;a++)for(let l=0;l<this.nTypes;l++)i[a][l]+=1/t*(s[a]*this.stateSecondMoments[o][l]+s[l]*this.stateSecondMoments[a][o]+s[a]*s[l]*this.expected[o])}const r=Array(this.nTypes).fill(0);for(let o=0;o<this.nTypes;o++){let s=this.pointStateCrossMoments[o];o<this.maxType&&(s-=this.pointStateCrossMoments[o]/t),o>=1&&(s+=this.pointStateCrossMoments[o-1]/t);let a=0;for(let l=0;l<this.nTypes;l++)a+=this.points[l]*this.stateSecondMoments[o][l];s+=a/t,o<this.maxType&&(s-=this.points[o]*this.expected[o]/t),o>=1&&(s+=this.points[o-1]*this.expected[o-1]/t),r[o]=s}this.expected=e,this.stateSecondMoments=i,this.pointStateCrossMoments=r}runSteps(t){this.reset();for(let e=0;e<t;e++)this.computeStep();return this.results}}export{ut as C,lt as D,St as I,K as a,bt as b,at as c,dt as d,pt as e,ht as f,ft as g,ct as h,Q as i,it as j,Z as k,ot as l,rt as m,tt as n,et as o,nt as p,gt as q,mt as r,st as s,vt as t,yt as u};
