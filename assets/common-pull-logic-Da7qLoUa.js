function C(o,r,a,c,l,f){const i=o.length-2;for(let t=i;t>=0;t--){const e=o[t],s=f[t+1];if(!e.isEmpty)if(e.type==="Character")w(r,t,o,c,e.type,s);else if(e.type==="Weapon")w(a,t,o,l,e.type,s);else throw new Error(`Unknown SSR array type: ${e.type}`)}}function w(o,r,a,c,l,f){const i=a[r].states.length,t=.5,e=.75;let s=.5;l==="Character"?s=t:l==="Weapon"&&(s=e);const p=a[r].states,P=a[r+1].states;for(let n=i-2;n>=0;n--){const h=p[n],E=n>=c,R=o[n-c*E],L=h*R,b=h-L;let U=L;if(U>1e-10&&(E||(U*=s),P[f]+=U),!E){let d=L*(1-s);d>1e-10&&(p[c]+=d)}let y=b;y>1e-10&&(p[n+1]+=y),p[n]=0}}export{C as r};
