var p=(e,n,i)=>{const t=e[n];return t?typeof t=="function"?t():Promise.resolve(t):new Promise((a,c)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(c.bind(null,new Error("Unknown variable dynamic import: "+n+(n.split("/").length!==i?". Note that variables only represent file names one level deep.":""))))})};let o=null,s=null,r=0;const u=10;let m=[],g,l;self.onmessage=function(e){switch(e.data?.type){case"Iterate":r++;const n=g.rankUpSSR(o,s.ODDS_CHARACTER_SSR,s.ODDS_WEAPON_SSR,s.SSR_CHAR_PITY,s.SSR_WEP_PITY,s.pities);r===u&&(l.pruneAndNormalize(o),r=0),m.push(l.consolidateProbabilities(o));const i=l.checkIsTarget(o,s.target,m.length);let t=!1;i||(t=l.checkIsEmpty(o,i)),t||i?(r!=u&&l.pruneAndNormalize(o),self.postMessage({type:"LastIteration",lossData:n,isEmpty:t,isTarget:i,allPullsDistributionSSR:[...m],distributionSSR:o})):self.postMessage({type:"IterationComplete",lossData:n});break;case"Initiate":Promise.all([p(Object.assign({"../../../games/common/commonPullLogic.js":()=>import("./commonPullLogic-LN8Exh0w.js"),"../../../games/genshin/genshinPullLogic.js":()=>import("./genshinPullLogic-D0ClKzdp.js")}),`../../../games/${e.data.context.moduleType}/${e.data.context.moduleType}PullLogic.js`,6),p(Object.assign({"../../../games/common/commonHelpers.js":()=>import("./commonHelpers-CFzEYYvM.js"),"../../../games/genshin/genshinHelpers.js":()=>import("./genshinHelpers-CZTXOU8z.js")}),`../../../games/${e.data.context.moduleType}/${e.data.context.moduleType}Helpers.js`,6)]).then(([a,c])=>{g=a,l=c,o=e.data.distribution,s=e.data.context.contextSSR,self.postMessage({type:"InitComplete"})}).catch(a=>{console.error("Failed to load modules:",a),self.postMessage({type:"InitError",error:a.message})});break;default:console.warn("Unknown type:",e.data?.type)}};self.onerror=function(e){console.error("Worker error:",e)};
