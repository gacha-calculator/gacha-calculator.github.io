function S(t,s,o){if(!Array.isArray(t.SSR.pullPlan))throw new Error("Invalid pull plan");const{pullPlan:n}=t.SSR,e=[];for(const[i,r]of n.entries())r.type==="char"?e.push({states:Array.from({length:o.CHARACTER},()=>new Map),type:"Character",isEmpty:!0}):e.push({states:Array.from({length:o.WEAPON},()=>new Map),type:"Weapon",isEmpty:!0});return e.push({states:Array.from({length:1},()=>new Map)}),a(s),{distributionSSR:e};function a(i){e[0].states[i[0]].set(0,{prob:1}),e[0].isEmpty=!1}}function y(t,s){const o=s.pitySSRChar;let n=!1,e=!1,a=0,i=0;const r=[];a+=t.SSR.pity.char,a+=t.SSR.guarantee.char*o,i+=t.SSR.pity.wep;for(const p of t.SSR.pullPlan)p.type==="char"&&!n?(n=!0,r.push(a)):p.type==="wep"&&!e?(e=!0,r.push(i)):r.push(0);return r.push(0),r}function c(t,s){const n=(s.SR-1)/2,e=[{states:Array.from({length:s.SR},()=>new Map)}],a=[{states:Array.from({length:s.SR},()=>new Map)}],i=t.SR.guarantee.char*n+t.SR.pity.char,r=t.SR.guarantee.wep*n+t.SR.pity.wep;p(e[0].states[i]),p(a[0].states[r]);function p(l){l.set(0,{prob:1})}return{distributionCharSR:e,distributionWepSR:a}}export{S as a,c as m,y as s};
