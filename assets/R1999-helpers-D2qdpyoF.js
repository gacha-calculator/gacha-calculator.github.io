function p(f){let e=[];for(let s of f)for(let t=0;t<s.length;t++)for(let r=0;r<s[t].states.length;r++)if(Array.isArray(s[t].states[r]))for(let n=0;n<s[t].states[r].length;n++)for(let[o,a]of s[t].states[r][n])if(e[t]===void 0){for(;t>=e.length;)e.push({states:Array.from({length:2},()=>new Map)});e[t].states[0].set(o,{prob:a.prob})}else{const l=e[t].states[r],i=l.get(o);i?i.prob+=a.prob:l.set(o,{prob:a.prob})}else for(let[n,o]of s[t].states[r])if(e[t]===void 0){for(;t>=e.length;)e.push({states:Array.from({length:2},()=>new Map)});e[t].states[0].set(n,{prob:o.prob})}else{const a=e[t].states[r],l=a.get(n);l?l.prob+=o.prob:a.set(n,{prob:o.prob})}return e}function u(f){let e=0;for(let r of f)e+=r.pullsSum;if(Math.abs(e-1)>1e-5)for(let r of f)r.pullsSum/=e,r.rankUps/=e}export{p as consolidateSRBanners,u as normalizePullsPerBanner};
