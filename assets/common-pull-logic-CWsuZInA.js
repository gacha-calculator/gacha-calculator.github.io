function O(r,a,o,c,p,l,f){const E=r.length-2;for(let t=E;t>=0;t--){const e=r[t],s=f[t+1];if(!e.isEmpty)if(e.type==="Character")C(a,t,r,c,e.type,s,l);else if(e.type==="Weapon")C(o,t,r,p,e.type,s,l);else throw new Error(`Unknown SSR array type: ${e.type}`)}}function C(r,a,o,c,p,l,f){const E=o[a].states.length,t=f.rateUpOddsChar,e=f.rateUpOddsWep;let s=.5;p==="Character"?s=t:p==="Weapon"&&(s=e);const i=o[a].states,b=o[a+1].states;for(let n=E-1;n>=0;n--){const U=i[n],d=n>=c,W=r[n-c*d],h=U*W,N=U-h;let L=h;if(L>1e-10&&(d||(L*=s),b[l]+=L),!d){let w=h*(1-s);w>1e-10&&(i[c]+=w)}let y=N;y>1e-10&&(i[n+1]+=y),i[n]=0}}export{O as r};
