<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gacha Calculator</title>
    <meta name="description"
        content="Calculate your gacha wish rates with your pity taken into account and cashback estimated with Gacha Calculator.">


    <!-- Favicon Links -->
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="msapplication-TileColor" content="#2b5797">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
    <link href="/src/css/styles.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
        rel="/stylesheet" />

    <script data-goatcounter="https://bubartem.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</head>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        this.expandBtn = document.getElementById('expand-button');
        this.expandedMenu = document.getElementById('expandedMenu');
        let draggedItem = null;

        if (this.expandBtn) {
            this.expandBtn.addEventListener('click', () => {
                this.expandBtn.classList.toggle('dropdown--open');
                this.expandedMenu.classList.toggle('active');
            });
        }

        const buttons = document.querySelectorAll('.nav-button');

        // Drag and drop functionality
        buttons.forEach(button => {
            button.addEventListener('dragstart', function (e) {
                draggedItem = this;
                setTimeout(() => {
                    this.classList.add('dragging');
                }, 0);
            });

            button.addEventListener('dragend', function () {
                this.classList.remove('dragging');
                draggedItem = null;

                buttons.forEach(btn => {
                    btn.classList.remove('drop-zone');
                });
            });

            button.addEventListener('dragover', function (e) {
                e.preventDefault();
                if (draggedItem && draggedItem !== this) {
                    this.classList.add('drop-zone');
                }
            });

            button.addEventListener('dragleave', function () {
                this.classList.remove('drop-zone');
            });

            button.addEventListener('drop', function (e) {
                e.preventDefault();
                this.classList.remove('drop-zone');

                if (draggedItem && draggedItem !== this) {
                    const draggedParent = draggedItem.parentNode;
                    const targetParent = this.parentNode;

                    const temp1 = document.createElement('div');
                    const temp2 = document.createElement('div');

                    draggedParent.insertBefore(temp1, draggedItem);
                    targetParent.insertBefore(temp2, this);

                    draggedParent.insertBefore(this, temp1);
                    targetParent.insertBefore(draggedItem, temp2);

                    draggedParent.removeChild(temp1);
                    targetParent.removeChild(temp2);

                    saveNavOrder();
                }
            });
        });

        function saveNavOrder() {
            const mainNav = document.querySelector('.nav-list');
            const expandedNav = document.querySelector('.nav-container--expanded .nav-list');

            const order = {
                main: Array.from(mainNav.children).slice(0, -1).map(li => li.querySelector('.nav-button').getAttribute('href')),
                expanded: Array.from(expandedNav.children).map(li => li.querySelector('.nav-button').getAttribute('href'))
            };

            localStorage.setItem('navOrder', JSON.stringify(order));
        }

        function loadNavOrder() {
            const saved = JSON.parse(localStorage.getItem('navOrder'));
            if (!saved) return;

            const mainNav = document.querySelector('.nav-list');
            const expandedNav = document.querySelector('.nav-container--expanded .nav-list');
            const homeButton = mainNav.lastElementChild;

            const allItems = new Map();
            document.querySelectorAll('li').forEach(li => {
                const button = li.querySelector('.nav-button');
                if (button) {
                    allItems.set(button.getAttribute('href'), li);
                }
            });

            const mainItems = Array.from(mainNav.children).slice(0, -1);
            mainItems.forEach(li => li.remove());
            expandedNav.innerHTML = '';

            saved.main.forEach(href => {
                const li = allItems.get(href);
                if (li) mainNav.insertBefore(li, homeButton);
            });

            saved.expanded.forEach(href => {
                const li = allItems.get(href);
                if (li) expandedNav.appendChild(li);
            });

        }
        loadNavOrder();
        const navContainer = document.querySelector('.nav-container');
        navContainer.style.opacity = '1';
    });
</script>

<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav-container" aria-label="Game selection">
            <ul class="nav-list">
                <li>
                    <a href="/genshin/" class="nav-button" aria-label="Go to Genshin Impact Calculator">
                        <div class="icon-container">
                            <img src="/images/genshin_icon.jpeg" class="nav-icon">
                        </div>
                        <span>Genshin Impact</span>
                    </a>
                </li>
                <li>
                    <a href="/HSR/" class="nav-button" aria-label="Go to Honkai Star Rail Calculator">
                        <div class="icon-container">
                            <img src="/images/honkai_icon.png" class="nav-icon">
                        </div>
                        <span>Honkai Star Rail</span>
                    </a>
                </li>
                <li>
                    <a href="/ZZZ/" class="nav-button" aria-label="Go to Zenless Zone Zero Calculator">
                        <div class="icon-container">
                            <img src="/images/zenless_icon.jpeg" class="nav-icon">
                        </div>
                        <span>Zenless Zone Zero</span>
                    </a>
                </li>
                <li>
                    <a href="/wuwa/" class="nav-button" aria-label="Go to Wuthering Waves Calculator">
                        <div class="icon-container">
                            <img src="/images/wuwa_icon.jpg" class="nav-icon">
                        </div>
                        <span>Wuthering Waves</span>
                    </a>
                </li>
                <li>
                    <a href="/R1999/" class="nav-button" aria-label="Go to Reverse 1999 Calculator">
                        <div class="icon-container">
                            <img src="/images/reverse_icon.png" class="nav-icon">
                        </div>
                        <span>Reverse 1999</span>
                    </a>
                </li>
                <li>
                    <div class="home-button-group">
                        <a href="/" class="nav-button--home" aria-label="Go to Home Page">
                            <div class="icon-container">
                                <img src="/images/home_icon.png" class="nav-icon">
                            </div>
                            <span>Home</span>
                        </a>
                        <div class="expand-button" id="expand-button" aria-label="Expand Game Selection">
                            <svg id="Flat" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256">
                                <path style="fill:#232338; stroke:#948acf; stroke-width: 3px"
                                    d="M236.77344,211.97656a23.75471,23.75471,0,0,1-20.79688,12.01563H40.02344a23.9925,23.9925,0,0,1-20.76563-36.02344L107.23437,35.97656h-.00781a24.00413,24.00413,0,0,1,41.54688,0l87.96875,151.99219A23.744,23.744,0,0,1,236.77344,211.97656Z" />
                            </svg>
                        </div>
                    </div>
                </li>
            </ul>
            <nav class="nav-container--expanded" id="expandedMenu">
                <ul class="nav-list">
                    <li>
                        <a href="/GFL2/" class="nav-button"
                            aria-label="Go to Girlzu Furontuline Tsu: Exilium Calculator" draggable="true">
                            <div class="icon-container">
                                <img src="/images/gfl2_icon.jpg" class="nav-icon">
                            </div>
                            <span>Girls Frontline 2: Exilium</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </nav>
    </header>

    <div class="background-container">
        <div class="image-fade"></div>
        <img src="/images/home_bg.jpg" alt="Background art">
    </div>

    <div class="small-background-container">
        <img src="/images/home_bg_small.jpg" alt="Background art">
    </div>

    <main class="main-content">
        <section class="content-box" aria-label="Calculator interface">
            <section>
                <h1>What is a Gacha Calculator:</h1>
                <p>"Can I afford this weapon and still get the char I want?" "How much should I save for 3 char dupes
                    and a weapon?"</p>
                <p> Stop guessing and approximating, that's what gacha calculator is for.</p>

                <h2>Available games:</h2>
                To see all available games press â–¼ button at the top near home button:
                <div>
                    <img src="/images/home_button.jpg">
                </div>

                You can drag and drop game buttons to ensure games you play are at the top row:
                <div>
                    <img src="/images/header.jpg">
                </div>

                <h2>Upcoming updates(Only if I see enough interest from the people):</h2>
                <p>4* risk calculator</p>
                <p>Per character constellation setting</p>
                <p>Seperate options for limited banners and d*uble banners for reverse</p>
                <p>HSR option to mark that rate up is also standard</p>
                <h2>Suggestion box</h2>
                <p>Leave suggestions(games/features) or report a bug here:
                    <a href="url" class="soft-link">https://forms.gle/WWf6rESYDqNEDmjU8</a>
                </p>
            </section>
        </section>
    </main>
</body>

<footer>
    <main class="footer">
        <section class="content-box" aria-label="Footer">
            <small>
                gacha-calculator.github.io is an unofficial, fan project.<br>
                All game assets, names, and trademarks are the property of their respective owners.<br>
                This site is not affiliated with or endorsed by any game publisher.
            </small>
        </section>
    </main>
</footer>

</html>